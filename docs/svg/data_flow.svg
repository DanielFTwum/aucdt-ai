<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <rect width="800" height="400" fill="#f8fafc"/>
  <text x="400" y="30" font-family="sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Data Flow Diagram: AI Chat Interaction</text>

  <!-- Entities -->
  <g transform="translate(50, 150)">
    <rect width="100" height="100" fill="#e2e8f0" stroke="#334155" stroke-width="2"/>
    <text x="50" y="55" font-family="sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Student</text>
  </g>

  <g transform="translate(650, 150)">
    <rect width="100" height="100" fill="#dcfce7" stroke="#15803d" stroke-width="2"/>
    <text x="50" y="55" font-family="sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Gemini API</text>
  </g>

  <!-- Process -->
  <g transform="translate(350, 150)">
    <circle cx="50" cy="50" r="60" fill="#bae6fd" stroke="#0284c7" stroke-width="2"/>
    <text x="50" y="45" font-family="sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Process Chat</text>
    <text x="50" y="65" font-family="sans-serif" font-size="10" text-anchor="middle">Manage State</text>
  </g>

  <!-- Data Store -->
  <g transform="translate(325, 300)">
    <path d="M0,10 Q50,0 100,10 L100,40 Q50,50 0,40 Z" fill="#fef08a" stroke="#eab308" stroke-width="2"/>
    <path d="M0,10 Q50,20 100,10" fill="none" stroke="#eab308" stroke-width="2"/>
    <text x="50" y="35" font-family="sans-serif" font-size="12" text-anchor="middle">Session Hist.</text>
  </g>

  <!-- Flows -->
  <!-- Student to Process -->
  <path d="M150 180 L290 180" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="220" y="170" font-family="sans-serif" font-size="10" text-anchor="middle">Prompt / Image</text>

  <!-- Process to Student -->
  <path d="M290 220 L150 220" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="220" y="240" font-family="sans-serif" font-size="10" text-anchor="middle">Response Text</text>

  <!-- Process to API -->
  <path d="M410 180 L650 180" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="530" y="170" font-family="sans-serif" font-size="10" text-anchor="middle">Structured Request (JSON)</text>

  <!-- API to Process -->
  <path d="M650 220 L410 220" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="530" y="240" font-family="sans-serif" font-size="10" text-anchor="middle">Stream Chunks</text>

  <!-- Process to Store -->
  <path d="M400 210 L400 290" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="440" y="260" font-family="sans-serif" font-size="10">Update History</text>

  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
  </defs>
</svg>